// Stupid jQuery table plugin.
!function(a){a.fn.stupidtable=function(b){return this.each(function(){var c=a(this);b=b||{},b=a.extend({},a.fn.stupidtable.default_sort_fns,b),c.data("sortFns",b),c.on("click.stupidtable","thead th",function(){a(this).stupidsort()})})},a.fn.stupidsort=function(b){var c=a(this),d=0,e=a.fn.stupidtable.dir,f=c.closest("table"),g=c.data("sort")||null;if(null!==g){c.parents("tr").find("th").slice(0,a(this).index()).each(function(){var b=a(this).attr("colspan")||1;d+=parseInt(b,10)});var h;return 1==arguments.length?h=b:(h=b||c.data("sort-default")||e.ASC,c.data("sort-dir")&&(h=c.data("sort-dir")===e.ASC?e.DESC:e.ASC)),f.trigger("beforetablesort",{column:d,direction:h}),f.css("display"),setTimeout(function(){var b=[],i=f.data("sortFns"),j=i[g],k=f.children("tbody").children("tr");k.each(function(c,e){var f=a(e).children().eq(d),g=f.data("sort-value");if("undefined"==typeof g){var h=f.text();f.data("sort-value",h),g=h}b.push([g,e])}),b.sort(function(a,b){return j(a[0],b[0])}),h!=e.ASC&&b.reverse(),k=a.map(b,function(a){return a[1]}),f.children("tbody").append(k),f.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),c.data("sort-dir",h).addClass("sorting-"+h),f.addClass("sortingTable"),f.trigger("aftertablesort",{column:d,direction:h}),f.css("display"),f.removeClass("sortingTable"),f.find("th").find(".arrow").remove();var l=h===e.ASC?"&uarr;":"&darr;";f.find("th").eq(d).append('<span class="arrow">'+l+"</span>")},10),c}},a.fn.updateSortVal=function(b){var c=a(this);return c.is("[data-sort-value]")&&c.attr("data-sort-value",b),c.data("sort-value",b),c},a.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},a.fn.stupidtable.default_sort_fns={int:function(a,b){return parseInt(a,10)-parseInt(b,10)},float:function(a,b){return parseFloat(a)-parseFloat(b)},string:function(a,b){return a.localeCompare(b)},"string-ins":function(a,b){return a=a.toLocaleLowerCase(),b=b.toLocaleLowerCase(),a.localeCompare(b)},date:function(a,c){return aDate=b(a),bDate=b(c),aDate-bDate}};var b=function(a){var b=a.split(" "),c=b[0].split("/"),d=b[1].split(":"),e=c[2],f=c[1]-1,g=c[0],h=d[0],i=d[1];return new Date(e,f,g,h,i,0,0)}}(jQuery);