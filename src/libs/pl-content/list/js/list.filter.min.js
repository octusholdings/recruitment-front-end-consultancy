List.prototype.plugins.filtering=function(e,t){var n=this,r=$("#"+n.listContainer.id),i={},s=function(){t=t||{};t.allLabel=t.allLabel||"All";r.find('[data-filter="dropdown"]').each(function(){var e=$(this),n=$("<select></select>");e.append(n);var r=e.attr("data-filter-property"),s=u.values(r).unique(),a=$("<option>"+t.allLabel+"</option>");a.data("value","");n.append(a);for(var f=s.length-1;f>=0;f--){var l=s[f];if(l!==""){var a=$("<option>"+l+"</option>");a.data("value",l);n.append(a)}}n.change(function(){i[r]=n.find("option:selected").data("value").split(",");o()})});r.find("[data-filter-set]").live("click",function(){var e=$(this),t=e.attr("data-filter-set"),n=e.parents("[data-filter-property]").attr("data-filter-property");t==""?delete i[n]:i[n]=t.split(",");o()})},o=function(){n.filter(function(e){var t=!0;$.each(i,function(n,r){if(r.length==0||r[0]=="")return;r.indexOf(e.values()[n])==-1&&(t=!1)});return t})},u={values:function(e){var t=[];for(var r=n.items.length-1;r>=0;r--){var i=n.items[r];t.push(i.values()[e])}return t}};Array.prototype.unique=function(){var e={},t,n=this.length,r=[];for(t=0;t<n;t+=1)e[this[t]]=this[t];for(t in e)r.push(e[t]);return r};s();return this};